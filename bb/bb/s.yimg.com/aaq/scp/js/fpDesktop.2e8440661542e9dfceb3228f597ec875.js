!function(){"use strict";var e=window.wafer,t=e.base||{};function n(n,o){if(e)return o=o||{},e.utils.elementInView(n,o,t.viewport)}function o(e,t,n,o,i){return{clean:t,dest:n,h:i,metaSize:!0,pos:e,supports:!1,w:o}}var i={context:{bucket:"",bucketId:"",device:"",intl:"",lang:"",meta:{},mode:"normal",region:"",rid:"",site:""},i13n:{}},a=["MAST","LDRB"],s=function(){var e,t,s,r,l,d=window,c=document,f=d.adsConfig,u=d.YAHOO,v=void 0===u?i:u,p=d.DARLA,m=void 0===p?null:p,h=d.wafer,g={},b="adRotateEvt",E="scroll",w="homepage-viewer",C="sda-",A="sticky-lrec2-footer",L=C+"LREC4",y=C+"MON2",x="2023538075",O="native-leaderboard-ad",R="gemini-ad-refresh",B=!1;function D(){var o;if(f&&(t=f.rotation)&&(null===(o=null==f?void 0:f.positions)||void 0===o?void 0:o[t.currentpos]))if(f.clientPositionMeta.positions.forEach((function(e){g[e.id]=e})),r=g[t.currentpos],m)if(t.enableNavAdRotation&&h.on("fetch:success",(function(e){e.elem.classList.contains("nextgen-page-navigation")&&function(e){var t=d._darlaAutoEvt;t||(t=m.evtSettings("AUTO")||{});for(var o=[],i=0;i<e.length;i++){var a=e[i],s=m.posSettings(a);if(s&&s.dest){var r=document.getElementById(s.dest);r&&n(r,0)&&r.offsetHeight>1&&o.push(a)}}if(o.length){var l=t.sa,c={experience:t.experience,name:b,npv:1,property:"fp",ps:o.join(","),ref:d.location.href,sa:l,secure:t.secure,sp:t.sp,ssl:t.ssl,ult:t.ult};m.add(c),m.event(b)}}(a)})),(s=c.getElementById(C+(null==r?void 0:r.pos)))||f.enableGAMAds){e={offsetX:0,offsetY:parseInt(t.offset,10)||100},h.on(E,I),d.addEventListener("viewerOpened",(function(){B=!0})),d.addEventListener("seamless:article:inview",(function(){B=!0})),d.addEventListener("seamless:home:inview",(function(){B=!1,S()})),d.addEventListener("viewerScrollRestored",(function(){B=!1,S()})),d.addEventListener("ads:finish:parse",P),setTimeout((function(){I()}),300);var i=c.getElementsByClassName(O);i&&i.length>0&&(l=i[0]),"failsafe"===v.context.mode&&m.event("adFetch"),function(){if(B||!f.enableGAMAdsCtrl)return;var e=m.config().onSuccess,t={LDRB:!0,LREC:!0,LREC3:!0,LREC4:!0,MAST:!0,MON2:!0};m.config().onSuccess=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=n[1]||[];i.some((function(e){return t[e]}))&&N({beaconType:"gamdebugctrl",event:n[0]||"",position:i.join(","),status:"success"}),e&&e.apply(m,n)}}()}else console.error("No LRECAdsContainer");else console.error("No Darla instance")}function P(e){var t=e.detail.positions;for(var n in t)if(t.hasOwnProperty(n)){var o=t[n].posData.conf.clean,i=document.getElementById(o);i&&(i=i.parentElement)&&i.classList&&(i.classList.contains("Ht-pl-LDRB")||i.classList.contains("Ht-pl-LREC"))&&(i.classList.remove("Ht-pl-LDRB"),i.classList.remove("Ht-pl-LREC"))}if(t.MON2&&t.LREC3&&t.LREC4){var a=t.MON2.validAd,s=document.getElementById("sda-LREC3"),r=document.getElementById("sda-LREC4");a?(s.classList.add("D(n)"),r.classList.add("D(n)")):(s.classList.remove("D(n)"),r.classList.remove("D(n)"))}}function I(t){var o;if(!B&&!f.enableGAMAds&&n(s,e)){if(T(),f.enableGAMAdsCtrl&&(null===(o=f.clientPositionMeta)||void 0===o?void 0:o.positions))N({beaconType:"gamdebugctrl",event:"fetch_selective_ad_lrec3",position:(f.clientPositionMeta.positions.map((function(e){return e.id}))||[]).join(","),status:"fetched"});h.removeListener(E,I)}}function T(){if(t){var e,n=r,i="",a=[n],s=t.lrec4pos||"LREC4",l=C+s,d=g[s]||o(s,l,l+"-iframe",300,250),c=t.mon2pos||"MON2",f=C+c,u=g[c]||o(c,f,f+"-iframe",300,600);n&&(e=n.pos,n.id=e,i+=e),t.lrec4enabled&&(i+=","+d.pos,a.unshift(d)),t.mon2enabled&&(i+=","+u.pos,a.push(u));var v,p,h="fetch_selective_ad_"+e.toLowerCase(),b=M(i,h);if(m.inProgress()){var E=m.inProgress();if(!E||E!==w)return v=0,void(p=setInterval((function(){v>20?clearInterval(p):(m.inProgress()||(clearInterval(p),T()),v++)}),500));m.abort(),m.add(b),m.addPos(a),m.event(h)}else t.lrec2selectiveenabled&&(m.add(b),m.addPos([a]),m.event(h))}}function S(){var e;if(d.pageloadNonCollapsedAds){for(var o,i=[],a=d.pageloadNonCollapsedAds,s=0,r=["LREC","MAST","LDRB","UBALDRB","UBALREC","UBALREC2","UBALREC3"];s<r.length;s++){var f=r[s],u=f;if(a.indexOf(f)>=0){f.includes("UBA")&&(u=f.split("UBA")[1]);var v=c.getElementById(C+u);v&&n(v)&&i.push(f)}}if(i.length)F(o=M(i,b),!0);else if(a.indexOf("FPAD")>=0&&d.safeframeOptinPositions&&d.safeframeOptinPositions.FPAD){o=M("FPAD",b);var p=m.config(),h=c.getElementById(C+"FPAD");!!(null===(e=null==p?void 0:p.positions)||void 0===e?void 0:e.FPAD)&&h&&n(h)&&F(o)}if(t){var E=c.getElementById(A),w=c.getElementById(L),x=c.getElementById(y);if(E&&n(E)||w&&n(w)||t.mon2enabled&&x&&n(x)){var B=[],D=null==g?void 0:g[t.currentpos],P=(null==D?void 0:D.pos)||"";if(P&&B.push(P),t.mon2enabled?(B.push("MON2"),t.lrec4enabled&&t.lrec4pos&&B.push(t.lrec4pos)):t.lrec4enabled&&t.lrec4pos&&B.push(t.lrec4pos),B.length){var I="fetch_selective_ad_"+P.toLowerCase(),T=M(B.join(","),I);m.add(T),m.event(I)}}l&&n(l)&&function(){if(!l)return;var e=l.getElementsByClassName(R);if(e&&e.length>0){var t=(e=e[0]).getAttribute("data-url"),n=e.getAttribute("data-body");t&&n&&d.wafer&&d.wafer.utils&&d.wafer.utils.fetchWithCache&&d.wafer.utils.fetchWithCache(t,{body:n,cache:0}).then((function(t){if(t&&t.html){e.innerHTML=t.html;var n=e.getElementsByClassName(O);if(n&&n.length>0){l.replaceWith(n[0]);var o=c.getElementsByClassName(O);o&&o.length>0&&(l=o[0],d.wafer.base.sync(l.parentElement))}}}))}}()}}}function M(e,t,n){var o,i,a=v.context,s=Array.isArray(a.bucket)?a.bucket.join(","):a.bucket,r={pg:{device:a.device,intl:a.intl,property:"fp",rid:a.rid,test:s}},l={experience:{bucket:a.bucket||"",pd:"modal",pt:"index",rid:a.rid||"",sid:(null===(o=null==v?void 0:v.i13n)||void 0===o?void 0:o.currentSID)||""},name:t,npv:1,property:"fp",ps:e,ref:d.location.href,sa:"",secure:1,sp:(null===(i=null==v?void 0:v.i13n)||void 0===i?void 0:i.SPACEID)||x,ssl:1,ult:r};for(var c in n)n.hasOwnProperty(c)&&(l[c]=n[c]);if(m){var f=m.evtSettings("adFetch");l.sa=(null==f?void 0:f.sa)||""}return l}function F(e,t){var n;t=t||!1,m.inProgress()?m.inProgress()===w&&(m.abort(),t&&d._darlaAutoEvt&&d._darlaAutoEvt.ps&&m.add(d._darlaAutoEvt),m.add(e),m.event(b)):(t&&(null===(n=null==d?void 0:d._darlaAutoEvt)||void 0===n?void 0:n.ps)&&m.add(d._darlaAutoEvt),m.add(e),m.event(b))}function N(e){var t,n,o,i=v.context,a=Object.assign({},e,{bucket:i.bucket,device:i.device,intl:i.intl,rid:i.rid,site:i.site||"fp"});void 0!==typeof URLSearchParams&&(o="".concat("info/p.gif","?").concat(new URLSearchParams(a).toString())),o&&(null===(n=null===(t=d.wafer)||void 0===t?void 0:t.utils)||void 0===n?void 0:n.fireBeacon)&&d.wafer.utils.fireBeacon(o)}m?D():d.addEventListener("darlaReadyOnAsync",(function(){D()}))};var r,l,d=(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.transformDarlaConfToJac=t.siteAttributesToMap=t.updateRotationConfFromAutoEvent=t.transformDarlaPositionConfToJac=t.transformDarlaDefaultPositionConfToJac=void 0,t.transformDarlaDefaultPositionConfToJac=e=>{const t={targetElement:e.dest};if(e.meta&&(t.meta=e.meta),e.sandbox){const n=e.sandbox.split(" ").map((e=>e.replace(/^allow-/,"")));t.sandbox={allow:n}}return{client:t,service:{id:"DEFAULT"}}},t.transformDarlaPositionConfToJac=e=>{if(!e)return null;if("DEFAULT"===e.id)return(0,t.transformDarlaDefaultPositionConfToJac)(e);const n=e.id||e.pos||e.name||"",o={fetch:{auto:!1},render:{auto:!0,doubleBuffering:!0},safeFrame:{enabled:!0},targetElement:e.dest},i={client:o,service:{id:n.split("-")[0],sizes:[(e.w||1)+"x"+(e.h||1)]}};return e.supports&&(o.safeFrame.features={},e.supports["exp-ovr"]||(o.safeFrame.features.expandOver={enabled:!1}),e.supports["exp-push"]&&(o.safeFrame.features.expandPush={enabled:!0}),e.supports["resize-to"]&&(o.safeFrame.features.resize={enabled:!0})),e.flex&&(o.flexible={enabled:!0},e.flex.w&&(o.flexible.width={enabled:!0},e.flex.w.min&&(o.flexible.width.min=parseInt(String(e.flex.w.min),10)),e.flex.w.max&&(o.flexible.width.max=parseInt(String(e.flex.w.max),10))),e.flex.h?(o.flexible.height={enabled:!0},e.flex.h.min&&(o.flexible.height.min=parseInt(String(e.flex.h.min),10)),e.flex.h.max&&(o.flexible.height.max=parseInt(String(e.flex.h.max),10))):e.flex.w&&!e.flex.ratio&&(o.flexible.height={enabled:!1}),e.flex.ratio&&(o.flexible.ratio=e.flex.ratio)),e.closeBtn&&(o.closeButton={enabled:!0},e.closeBtn.useShow&&(o.closeButton.showButtonEnabled=!0)),e.meta&&(o.meta=e.meta),void 0!==e.doubleBuffering&&(o.render.doubleBuffering=!!e.doubleBuffering),e.rotation&&(o.rotation=e.rotation),e.metaSize&&(o.render.useConfigSize=!0),i},t.updateRotationConfFromAutoEvent=(e,t,n)=>{var o,i;if("string"!=typeof(null==e?void 0:e.ps)&&(null===(i=null===(o=null==e?void 0:e.ps)||void 0===o?void 0:o[t])||void 0===i?void 0:i.autoMax)){const o=e.ps[t];n.rotation={enabled:!0},o.autoRT&&(n.rotation.inViewDuration=parseInt(String(o.autoRT),10)),o.autoIV&&(n.rotation.requireViewable=!0),n.rotation.limit=parseInt(String(o.autoMax||e.autoMax),10),n.rotation.period=parseInt(String(e.autoRT),10)}},t.siteAttributesToMap=e=>{if(!e)return null;let t="";const n=[];let o=0,i="";const a=()=>{if(o+1<e.length){i=e.charAt(o+1);let t=!1;for(;" "===i&&o+1<e.length;)o++,i=e.charAt(o),t=!0;t&&o--}},s=n=>{if(o+1<e.length){for(i=e.charAt(o+1),o++;i!==n&&o+1<e.length;)t+=i,i=e.charAt(o+1),o++;i!==n&&(t+=i)}};for(o=0;o<e.length;o++)i=e.charAt(o),"="===i?(t&&(n.push(t),t=""),a()):'"'===i?(t&&(n.push(t),t=""),s('"'),t&&(n.push(t),t="")):"'"===i?(t&&(n.push(t),t=""),s("'"),t&&(n.push(t),t="")):" "===i?(t&&(n.push(t),t=""),a()):t+=i;t&&(n.push(t),t="");const r={};for(o=0;o<n.length;o+=2)r[n[o]]=n[o+1];return n.length%2==1&&(r[n[n.length-1]]=" "),r},t.transformDarlaConfToJac=(e,n,o)=>{var i,a,s,r,l,d;const c={client:{positions:{}},service:{adServer:{PG:{siteAttributes:{}}},positions:{}}},f=e.events||{},u=f.AUTO,v=u.sp||(null===(i=f.DEFAULT)||void 0===i?void 0:i.sp)||(null===(a=f.adFetch)||void 0===a?void 0:a.sp),p=u.site||(null===(s=f.DEFAULT)||void 0===s?void 0:s.site)||(null===(r=f.adFetch)||void 0===r?void 0:r.site)||"";v&&(c.service.site={name:p,spaceId:v,url:o});const m=n||u.sa||(null===(l=f.DEFAULT)||void 0===l?void 0:l.sa)||(null===(d=f.adFetch)||void 0===d?void 0:d.sa);if(m)if("string"==typeof m){const e=(0,t.siteAttributesToMap)(m);c.service.adServer.PG.siteAttributes=e}else c.service.adServer.PG.siteAttributes=m;const h=e.positions,g=o?o.split("?")[0]:"";if(h&&Object.keys(h).forEach((e=>{const n=h[e];if(!n)return;const o=(0,t.transformDarlaPositionConfToJac)(n);o&&(o.client.meta&&o.client.meta.hostURL||!g||(o.client.meta||(o.client.meta={hostURL:""}),o.client.meta.hostURL=g),(0,t.updateRotationConfFromAutoEvent)(u,e,o.client),c.service.positions[e]=o.service,c.client.positions[e]=o.client)})),u.groups){const e=u.groups,t={};Object.keys(e).forEach((n=>{const o=e[n];o&&o.indexOf(",")>=0?(t[n]||(t[n]=[]),t[n].push(o.split(","))):o&&(e[o]?t[o]?1===t[o].length&&t[o][0][0]!==o&&t[o].push(o):t[o]=[[o]]:t[o]=[[n],[o]])}));const n=[];Object.keys(t).forEach((e=>{n.push(t[e])})),c.client.rotation={groups:n}}return c}}(r={exports:{}},r.exports),r.exports);(l=d)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")&&l.default,d.transformDarlaConfToJac,d.siteAttributesToMap,d.updateRotationConfFromAutoEvent;var c=d.transformDarlaPositionConfToJac;d.transformDarlaDefaultPositionConfToJac;var f=function(){var e,t,i,a,s=window,r=document,l=s.adsConfig,d=s.wafer,f={},u="scroll",v="sda-",p=!1;function m(e){var t,n,o,i,a=null==e?void 0:e.meta,r=null==a?void 0:a.positionNames;for(var l in r)if(r[l]){var c=s.JAC.getConfig(),f=r[l],u=null===(n=null===(t=null==c?void 0:c.client)||void 0===t?void 0:t.positions[f])||void 0===n?void 0:n.targetElement,v=document.getElementById(u);(v=d.utils.findAncestor(v,"viewer-sda-container"))&&(v.classList.contains("Ht-pl-LDRB")||v.classList.contains("Ht-pl-LREC"))&&v.classList.remove("Ht-pl-LDRB","Ht-pl-LREC")}var p=null===(o=a.response)||void 0===o?void 0:o.positions;if(p&&p.MON2&&p.LREC3&&p.LREC4){var m=null===(i=p.MON2.content)||void 0===i?void 0:i.size,h=m&&1!==m.width&&1!==m.height,g=document.getElementById("sda-LREC3"),b=document.getElementById("sda-LREC4");h?(g.classList.add("D(n)"),b.classList.add("D(n)")):(g.classList.remove("D(n)"),b.classList.remove("D(n)"))}}function h(r){p||n(i,e)&&(!function(){var e,n;if(t){var i,r=a,l=[r],d=t.lrec4pos||"LREC4",u=v+d,p=f[d]||o(d,u,u+"-iframe",300,250),m=t.mon2pos||"MON2",h=v+m,g=f[m]||o(m,h,h+"-iframe",300,600);r&&(i=r.pos,r.id=i),t.lrec4enabled&&l.unshift(p),t.mon2enabled&&l.push(g);for(var b=s.JAC.getConfig(),E=[],w=0;w<l.length;w++){var C=c(l[w]),A=null===(e=null==C?void 0:C.service)||void 0===e?void 0:e.id;(null===(n=null==b?void 0:b.client)||void 0===n?void 0:n.positions)&&(null==C?void 0:C.client)&&(b.client.positions[A]=C.client),E.push(A)}s.JAC.setConfig(b),s.JAC.fetch(E)}}(),d.removeListener(u,h))}!function(){var n;if(!l||!s.JAC)return;if(!(t=l.rotation)||!(null===(n=null==l?void 0:l.positions)||void 0===n?void 0:n[t.currentpos]))return;if(l.clientPositionMeta.positions.forEach((function(e){f[e.id]=e})),a=f[t.currentpos],!(i=r.getElementById(v+(null==a?void 0:a.pos))))return void console.error("No LRECAdsContainer");e={offsetX:0,offsetY:parseInt(t.offset,10)||100},d.on(u,h),s.addEventListener("viewerOpened",(function(){p=!0})),s.JAC.on("FETCH_COMPLETE",m),setTimeout((function(){h()}),300)}()},u=function(){return u=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},u.apply(this,arguments)};function v(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}"function"==typeof SuppressedError&&SuppressedError;var p=function(e){var t=window.rapidInstance,n=e.meta,o=n.index,i=n.selectedValue,a=n.type,s=n.ylk,r=s.sec,l=s.slk,d=void 0===l?i:l,c=v(s,["sec","slk"]);c.elm||(c.elm="btn"),t.beaconClick(r,d,o,u(u({},c),{elmt:a}),"")},m=window.wafer,h=function(){var e,t=window.wafer,n=window.adsConfig;(e=window.s)&&e.t(),n.enableJac?f():s(),t.on("autocomplete:select",p),t.on("autocomplete:deleted",p),window.wafer.on("iframe:load",(function(e){if(e.elem.classList.contains("ap-embed")){var n=window.YAHOO.context,o="/info/p.gif?rid=".concat(n.rid,"&device=").concat(n.device,"&iframeClass=ap-embed");t.utils.fireBeacon(o)}})),function(){var e=window.wafer;e.on("lightbox:close",(function(t){var n=t.elem,o=t.meta,i=window.rapidInstance;if(i){var a=o.source;if("closeClick"!==a){var s=n.getElementsByClassName("wafer-lightbox-close")[0];if(!s)return;var r=e.utils.getYlkMapForNode(s,"data-ylk"),l=r.sec,d=r.slk,c=v(r,["sec","slk"]);c.elm||(c.elm="close"),i.beaconClick(l,d,0,u(u({},c),{elmt:a||"close"}),"")}}}))}(),-1!==window.YAHOO.context.feature.indexOf("enableArticleClusterStoryContinuous")&&window.wafer.on("caas:article:fetch",(function(e){var t=e.elem;if("mainArticle"===t.getAttribute("id")){var n=t.getElementsByClassName("caas-readmore-collapse")[0];n&&n.getElementsByClassName("collapse-button")[0]&&n.parentElement.removeChild(n)}}))};m?m.ready((function(){h()})):document.body.addEventListener("wafer:ready",(function(){h()}))}();
//# sourceMappingURL=fpDesktop.js.map
