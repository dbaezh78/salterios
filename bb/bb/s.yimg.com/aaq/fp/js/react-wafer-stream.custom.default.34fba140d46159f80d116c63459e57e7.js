window.wafer&&window.wafer.ready((function(){var e="show-drawer",t=null,a=null,n="wafer-fetch-error",r="wafer-fetch-complete",i="stream-related-drawer",o="StreamRelated",s="react-wafer-stream",c="json",d="wafer-fetch",l="stream-uuid-list",u=[],w=document.querySelectorAll(".stream-items"),f=window.innerWidth||document.documentElement.clientWidth,m="js-sponsored-moments-dwell-time",A=window.wafer&&window.wafer.utils,g={INARTICLE:9/16,reservemoments:16/9},p=function e(t){var a,n,r=t.getAttribute("data-da-position");if("reservemoments"===r&&(t=t.querySelector("#defaultRESERVEMOMENTS")),a=t.getAttribute("data-html"),n=t.getAttribute("data-darla-config"),a&&n){(n=JSON.parse(n)).dest;var i=window.DARLA.prefetched();if(!window.DARLA.config()||window.DARLA.inProgress()||i&&0!==i.length)setTimeout((function(){e(t)}),500);else{if(!n.h&&!n.w){var o=Math.floor(f*g[r]),s={flex:{h:{min:o},w:{min:f}},h:o,w:f};Object.assign(n,s)}var c=n.id;window.DARLA.addPos(n);var d=new window.DARLA.Response(c,{});a=unescape(a),d.add(c,a),window.DARLA.render(d),t.classList.remove("unprocessed-display-card")}}};window.wafer.on("fetch:success",(function(e){var t=e.elem;if(t&&t.classList){if(t.classList.contains("collections-view-more")&&(document.documentElement.classList.remove("Reader-closed"),document.documentElement.classList.add("Reader-open"),window.wafer.base.lock(document.getElementById("MainView")),window.scrollTo(0,0)),t.classList.contains("stream-batch-fetch")){var a=document.getElementsByClassName("js-display-card unprocessed-display-card");a.length&&A.convertNodeListToArray(a).forEach((function(e){window.DARLA&&e?p(e):e.style.display="none"}));var n=window.rapidPageConfig&&window.rapidPageConfig.rapidConfig&&window.rapidPageConfig.rapidConfig.spaceid;n&&(window._comscore=window._comscore||[],window._comscore.push({c1:2,c14:window.YAHOO&&window.YAHOO.comscore&&window.YAHOO.comscore.c14||-1,c2:"7241469",c5:n,c7:document.location.href}),window.COMSCORE&&window.COMSCORE.purge())}if(t.classList.contains("wafer-fetch-complete")){var r=t.getAttribute("data-wf-url");if(r&&r.includes("react-wafer-stream"))A.convertNodeListToArray(w).includes(t)||(w=document.querySelectorAll(".stream-items"),L())}}}));var v=function e(t){var a=Math.floor(16*f/9),n=t.querySelector("#defaultRESERVEMOMENTS"),r=n&&n.getAttribute("data-html");if(r){var i=window.DARLA.prefetched();if(window.DARLA.inProgress()||i&&0!==i.length)setTimeout((function(){e(t)}),500);else{var o={dest:"defaultRESERVEMOMENTS",flex:{h:{min:a},w:{min:f}},h:a,id:"RESERVEMOMENTS",supports:{"exp-ovr":1,"exp-push":1,"resize-to":1},w:f};window.DARLA.addPos(o);var s=new window.DARLA.Response("RESERVEMOMENTS",{});r=unescape(r),s.add("RESERVEMOMENTS",r),window.DARLA.render(s)}}};function L(){A.convertNodeListToArray(w).filter((function(e){return!e.classList.contains("init-visited")})).forEach((function(l){l.classList.add("init-visited"),l.addEventListener("animationend",(function(e){var t=e&&e.target;e&&t&&"fadeOutAdConfirm"===e.animationName&&(t.classList.contains("ad-feedback-options")||(t.classList.contains("give-feedback-screen")?t=A.findAncestor(t,"stream-item"):t.classList.contains("comm-undo")&&(t=A.findAncestor(t,"stream-item-card")),t.parentNode&&(window.wafer.base.destroy(t),t.parentElement.classList.contains("hide-on-dislike")?t.parentElement.parentElement.removeChild(t.parentNode):t.parentNode.removeChild(t))))})),l.addEventListener("click",(function(l){!function(l){window.location.href.indexOf("functest=1")>-1&&l.preventDefault();var u=l.target;if(!A||!u)return;var w=A.findAncestor(u,"js-content-viewer");if(!w)return;var f=A.findAncestor(w,"stream-cluster-item")||A.findAncestor(w,"js-stream-content");if(!f)return;var m=f.getAttribute("data-uuid");if(m){var g=f&&f.getAttribute("data-parent-uuid");if(t=g&&document.querySelector('li[data-uuid="'+g+'"]')||f,a=t&&t.getElementsByClassName(i)[0]){if(t.classList.contains(e))return;var p=S(),v=window.YAHOO&&window.YAHOO.context||{},L={config:{leadItemUuid:g||m},ctrl:o,lang:v.lang,m_id:s,m_mode:c,region:v.region,site:v.site},E=v.partner,h={dedupUuids:p.dedupUuids.join(","),uuid:m},y=a.getAttribute("data-cfg");if(y){var N=f.getAttribute("data-cposy");N=isNaN(N)?null:parseInt(N,10);try{var R=JSON.parse(y);null!==N&&(R.i13n.cposy=N),L.config=Object.assign(L.config,R)}catch(e){}}var b=a.getAttribute("data-bucket");b&&(L.bucket=b),E&&(L.partner=E),L.config.ncpParams=L.config.ncpParams||{},L.config.ncpParams.query=L.config.ncpParams.query||{},L.config.ncpParams.query=Object.assign(h,L.config.ncpParams.query);var q=window.wafer.base.state.drawer,O=q&&q.adsToken;O&&(L.config.ncpParams.query.geminiDedupeToken=O),a.setAttribute("data-wf-body",JSON.stringify(L)),a.classList.remove(n,r),a.classList.add(d),window.wafer.base.sync(a.parentNode)}}}(l)}));var u=l.querySelectorAll("."+m+", ."+m+"-mon");if(u.length){A.convertNodeListToArray(u).forEach((function(e){e.classList&&e.classList.contains("js-reserve-moments")&&(window.DARLA?v(e):e.style.display="none")}));var w=u[0].querySelector(".js-panorama-scroll-view");w&&0===w.scrollLeft&&(w.scrollLeft=(w.scrollWidth-f)/2)}var g=!!window.DARLA,L=l.querySelectorAll(".js-display-card.unprocessed-display-card");L.length&&A.convertNodeListToArray(L).forEach((function(e){g&&e?p(e):e.style.display="none"}))}))}if(w&&w.length){L();var E,h,y=document.getElementById("scrollable-smad"),N=document.getElementById("scrollable-video"),R=window.innerHeight||document.documentElement.clientHeight,b={},q=function(e){return e&&(e=(e=(e=(e=(e=(e=e.replace(/\$\(V_AUTOPLAYED\)/,!1)).replace(/\$\(V_PLAYER_WIDTH\)/,y.clientHeight)).replace(/\$\(V_PLAYER_HEIGHT\)/,y.clientWidth)).replace(/\$\(V_SKIP_AVAIL\)/,!1)).replace(/\$\(V_EXPANDED\)/,!1)).replace(/\$\(V_AUD_INFO\)/,2)),e};if(y){var O=y.getBoundingClientRect();E=O.top-R,h=O.bottom-E,b.startActionUrl=y.getAttribute("data-video-quartile-start"),b.quartileActionUrl25=y.getAttribute("data-video-quartile-25"),b.quartileActionUrl50=y.getAttribute("data-video-quartile-50"),b.quartileActionUrl75=y.getAttribute("data-video-quartile-75"),b.quartileActionUrl100=y.getAttribute("data-video-quartile-100")}y&&N&&window.addEventListener("scroll",A.throttle((function(){var e=N&&N.duration,t=y.getBoundingClientRect();if(t.top<R&&t.bottom>0){N.currentTime=(window.pageYOffset-E)*e/h;var a=(R-t.top)/R*100;(a=5*Math.ceil(a/5))>=100&&b.quartileActionUrl100?(A.fireBeacon(q(b.quartileActionUrl100),{useNavigator:!1}),b.quartileActionUrl100=null):a>=75&&b.quartileActionUrl75?(A.fireBeacon(q(b.quartileActionUrl75),{useNavigator:!1}),b.quartileActionUrl75=null):a>=50&&b.quartileActionUrl50?(A.fireBeacon(q(b.quartileActionUrl50),{useNavigator:!1}),b.quartileActionUrl50=null):a>=25&&b.quartileActionUrl25?(A.fireBeacon(q(b.quartileActionUrl25),{useNavigator:!1}),b.quartileActionUrl25=null):a>=5&&b.startActionUrl&&(A.fireBeacon(q(b.startActionUrl),{useNavigator:!1}),b.startActionUrl=null)}}),16))}var S=function(){for(var e=Array.prototype.slice.call(document.getElementsByClassName(l)),t=0;t<e.length;t++){var a=e[t],n=a.text;a.classList.remove(l);try{var r=JSON.parse(n);r&&Array.isArray(r.uuidList)&&u.length+r.uuidList.length<=250&&(u=u.concat(r.uuidList))}catch(e){}}return{dedupUuids:u}};window.addEventListener("viewerClosed",(function(){if(t){var n=t,r=a&&!!a.getElementsByClassName("stream-realted-list")[0];!n.classList.contains(e)&&r&&(n.classList.add("drawer-beacon"),setTimeout((function(){n.classList.add(e)}),10)),a=null,t=null}}));window.wafer.on("video:adplaybackstart",(function(e){e&&e.elem&&e.elem.parentNode&&e.elem.parentNode.classList&&e.elem.parentNode.classList.contains("stream-video-ad-v2")&&e.elem.parentNode.classList.remove("video-endcard")})),window.wafer.on("video:playbackcomplete",(function(e){e&&e.elem&&e.elem.parentNode&&e.elem.parentNode.classList&&e.elem.parentNode.classList.contains("stream-video-ad-v2")&&e.elem.parentNode.classList.add("video-endcard")}));window.wafer.on("toggle:change",(function(e){if(e&&e.meta&&e.elem){var t=e.elem.getAttribute("data-wf-toggle-target");"show-drawer"===e.meta.className&&w&&w.length&&A.convertNodeListToArray(w).forEach((function(e){var a=e.querySelector(t),n=a&&a.getElementsByClassName("drawer-fetch-target")[0];setTimeout((function(){n&&(n.innerHTML="")}),300)}))}}))}));